{"ast":null,"code":"var _jsxFileName = \"/Users/kery/Desktop/event_planner-development/src/pages/create/Create.js\",\n    _s = $RefreshSig$();\n\nimport './create.css';\nimport React, { useEffect, useState } from 'react';\nimport { useCollection } from '../../hooks/useCollection';\nimport { useAuthContext } from '../../hooks/useAuthContext';\nimport { useFirestore } from '../../hooks/useFirestore';\nimport { useHistory } from 'react-router-dom';\nimport Select from 'react-select';\nimport { timestamp } from '../../Firebase/config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst categories = [{\n  value: 'development',\n  label: 'Development'\n}, {\n  value: 'design',\n  label: 'Design'\n}, {\n  value: 'sales',\n  label: 'Sales'\n}, {\n  value: 'marketing',\n  label: 'Marketing'\n}];\nexport default function Create() {\n  _s();\n\n  const {\n    addDocument,\n    response\n  } = useFirestore('projects');\n  const {\n    documents\n  } = useCollection('users');\n  const [users, setUsers] = useState([]); // form field values\n\n  const [name, setName] = useState('');\n  const [details, setDetails] = useState('');\n  const [dueDate, setDueDate] = useState('');\n  const [category, setCategory] = useState('');\n  const [assignedUsers, setAssignedUsers] = useState([]);\n  const {\n    user\n  } = useAuthContext();\n  const [formError, setFormError] = useState(null);\n  const history = useHistory(); // create user values for react-select\n\n  useEffect(() => {\n    if (documents) {\n      setUsers(documents.map(user => {\n        return {\n          value: { ...user,\n            id: user.id\n          },\n          label: user.displayName\n        };\n      }));\n    }\n  }, [documents]); // console.log(users)\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setFormError(null);\n\n    if (!category) {\n      setFormError('Please select a category');\n      return;\n    }\n\n    if (assignedUsers.length < 1) {\n      setFormError('Please assign at least one user to this project.');\n      return;\n    }\n\n    const createdBy = {\n      displayName: user.displayName,\n      photoURL: user.photoURL,\n      id: user.uid\n    };\n    const assignedUserList = assignedUsers.map(u => {\n      return {\n        displayName: u.value.displayName,\n        photoURL: u.value.photoURL,\n        id: u.value.id\n      };\n    });\n    const project = {\n      name,\n      details,\n      categoty: category.value,\n      dueDate: timestamp.fromDate(new Date(dueDate)),\n      comments: [],\n      createdBy,\n      assignedUserList\n    };\n    await addDocument(project);\n\n    if (!response.error) {\n      history.push('/');\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"create-form\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"page-title\",\n      children: \"Create a new Project\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Project name:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          required: true,\n          type: \"text\",\n          onChange: e => setName(e.target.value),\n          value: name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Project Details:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          required: true,\n          onChange: e => setDetails(e.target.value),\n          value: details\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Set due date:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          required: true,\n          type: \"date\",\n          onChange: e => setDueDate(e.target.value),\n          value: dueDate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Project category:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          onChange: option => setCategory(option),\n          options: categories\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Assign to:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          onChange: option => setAssignedUsers(option),\n          options: users,\n          isMulti: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn\",\n        children: \"Add Project\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this), formError && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error\",\n        children: formError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 23\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Create, \"3la5vq/pxxiw2kLTnJLuzMLmCiQ=\", false, function () {\n  return [useFirestore, useCollection, useAuthContext, useHistory];\n});\n\n_c = Create;\n\nvar _c;\n\n$RefreshReg$(_c, \"Create\");","map":{"version":3,"names":["React","useEffect","useState","useCollection","useAuthContext","useFirestore","useHistory","Select","timestamp","categories","value","label","Create","addDocument","response","documents","users","setUsers","name","setName","details","setDetails","dueDate","setDueDate","category","setCategory","assignedUsers","setAssignedUsers","user","formError","setFormError","history","map","id","displayName","handleSubmit","e","preventDefault","length","createdBy","photoURL","uid","assignedUserList","u","project","categoty","fromDate","Date","comments","error","push","target","option"],"sources":["/Users/kery/Desktop/event_planner-development/src/pages/create/Create.js"],"sourcesContent":["import './create.css'\nimport React, { useEffect, useState } from 'react'\nimport { useCollection  } from '../../hooks/useCollection'\nimport { useAuthContext } from '../../hooks/useAuthContext'\nimport { useFirestore } from '../../hooks/useFirestore'\nimport { useHistory } from 'react-router-dom'\n\nimport Select from 'react-select'\nimport { timestamp } from '../../Firebase/config'\n\nconst categories = [\n  { value: 'development', label: 'Development' },\n  { value: 'design', label: 'Design' },\n  { value: 'sales', label: 'Sales' },\n  { value: 'marketing', label: 'Marketing' },\n]\n\nexport default function Create() {\n  const {addDocument, response} = useFirestore('projects')\n  const { documents } = useCollection('users')\n  const [users, setUsers] = useState([])\n\n  // form field values\n  const [name, setName] = useState('')\n  const [details, setDetails] = useState('')\n  const [dueDate, setDueDate] = useState('')\n  const [category, setCategory] = useState('')\n  const [assignedUsers, setAssignedUsers] = useState([])\n  const {user} = useAuthContext()\n  const [formError, setFormError] = useState(null)\n  const history = useHistory()\n\n\n  // create user values for react-select\n  useEffect(() => {\n    if(documents) {\n      setUsers(documents.map(user => {\n        return { value: {...user, id: user.id}, label: user.displayName }\n      }))\n    }\n  }, [documents])\n  // console.log(users)\n\n  const handleSubmit = async (e) => {\n    e.preventDefault()\n    setFormError(null)\n    if(!category) {\n      setFormError('Please select a category')\n      return\n    }\n    if(assignedUsers.length <1) {\n      setFormError('Please assign at least one user to this project.')\n      return\n    }\n    const createdBy = {\n      displayName: user.displayName,\n    photoURL: user.photoURL,\n    id: user.uid\n    }\n\n    const assignedUserList = assignedUsers.map((u) => {\n      return {\n        displayName: u.value.displayName,\n        photoURL: u.value.photoURL,\n        id:u.value.id \n      }\n    })\n\n    const project = {\n      name,\n      details,\n      categoty:category.value,\n      dueDate: timestamp.fromDate(new Date(dueDate)),\n      comments: [ ],\n      createdBy,\n      assignedUserList\n    }\n\n    await addDocument(project)\n    if (!response.error) {\n      history.push('/')\n    }\n  }\n\n  return (\n    <div className=\"create-form\">\n      <h2 className=\"page-title\">Create a new Project</h2>\n      <form onSubmit={handleSubmit}>\n        <label>\n          <span>Project name:</span>\n          <input\n            required \n            type=\"text\" \n            onChange={(e) => setName(e.target.value)}\n            value={name}\n          />\n        </label>\n        <label>\n          <span>Project Details:</span>\n          <textarea \n            required\n            onChange={(e) => setDetails(e.target.value)}\n            value={details} \n          ></textarea>\n        </label>\n        <label>\n          <span>Set due date:</span>\n          <input\n            required \n            type=\"date\" \n            onChange={(e) => setDueDate(e.target.value)} \n            value={dueDate}\n          />\n        </label>\n        <label>\n          <span>Project category:</span>\n          <Select\n            onChange={(option) => setCategory(option)}\n            options={categories}\n          />\n        </label>\n        <label>\n          <span>Assign to:</span>\n          <Select\n            onChange={(option) => setAssignedUsers(option)}\n            options={users}\n            isMulti\n          />\n        </label>\n\n        <button className=\"btn\">Add Project</button>\n\n        {formError && <p className=\"error\">{formError}</p>}\n      </form>\n    </div>\n  )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}